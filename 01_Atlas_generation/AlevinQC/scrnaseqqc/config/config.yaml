####################################################################################################
########################################### GENERAL PARAMETERS #####################################
####################################################################################################
## define project name
##--------------------------------------------------------------------------------------------
project:

## Path to a folder that will store the output generated by the workflow.
## Additional subfolders of this folder will be generated by the workflow.
## To put output in the current directory, set output to "./".
##---------------------------------------------------------------------------------------------
output:
plots:
##---------------------------------------------------------------------------------------------

# Components of the pipeline to run. Will be used to define rule all
components:
  multiqc: False # FastQC and MultiQC reports, deactivate if no quantification is needed
  alevin_qc: False # Sample-wise QC reports on the Salmon Alevin quantification

####################################################################################################
######################################### AUTOMATIC FILE NAMING ####################################
####################################################################################################
# A list of parts from [index, lane, read, hash] known to not exist in sample names, e.g. ["index"]
# Use if automatic file naming is falsey finding a part which is not in fact present. Default: None
excludes: None

# A dictionary of known file naming conventions. Default: {"index": "_G", "lane": "_L", "read": "_R", "hash": "_"}
# Can contain key(s) from: `index`, `lane`, `read`, `hash`.
assumptions: {"index": "_GEX_", "lane": "_L", "read": "_R", "hash": "_001"}

####################################################################################################
########################################## QUANTIFICATION ##########################################
####################################################################################################
## If the workflow should start with the count matrix set counting to FALSE, for quantification with alevin set to TRUE
##--------------------------------------------------------------------------------------------
## are FASTQ files available and counting by alevin ("True") or not ("False")
counting: False
## If counting FALSE, set the path to the count matrix. Format is automatically detected.
countmat_dir:
## Parameters for Alevin quant
##---------------------------------------------------------------------------------------------

# normally library type should be left as default. See https://salmon.readthedocs.io/en/latest/alevin.html#using-alevin
library_type: -lISF

# extra args for salmon quant.
# NOTES:
# - if set, OVERRIDES 'chromversion' option below (options are incompatible).
# - `--dumpMtx` is always set (required for pipeline completion).
extra_args_alevin_quant:

## Reference annotation details
##--------------------------------------------------------------------------------------------
## Specify "Ensembl" or "Gencode" depending on your choice
annotation:
organism:
build:
release:
##--------------------------------------------------------------------------------------------

## Paths to existing reference files, txome for the reference transcriptome and gtf for the gene annotation
##--------------------------------------------------------------------------------------------
txome:
gtf:
genome:
##--------------------------------------------------------------------------------------------


## Paths to indexes that will be generated by the workflow, meta data files for salmon index (decoys and gentrome), salmon geneindex and transcript to gene map for alevin
##--------------------------------------------------------------------------------------------
extra_args_salmon_index: ""
salmonk: 31
##--------------------------------------------------------------------------------------------


## Information about the experiment
##--------------------------------------------------------------------------------------------
## 10x chromium chemistry versions, either v2: "chromium" or v3: "chromiumV3"
chromversion: chromiumV3

## Path to metadata text file. This file must contain at least the following columns:
## ID: the sample identifiers = the names of the FASTQ files (excluding the _R1/R2.fastq.gz part)
## type: either SE or PE, indicating whether the sample was analyzed
## via single-end or paired-end sequencing. Additional columns are lane number, batch, celline and condition.
group_info:
## The column in the metadata text file that will be used to color samples in exploratory
## analysis plots. Still have to implement that
groupvar:

## The maximal number of threads to use for FastQC, Salmon index and Salmon alevin. Additionally the steps for marker detection and DE testing are also run in parallel
## Note that the actual number of cores available to Snakemake is determined by
## the argument -j when the pipeline is invoked. Default number of threads is 4. A good choice for -j is ncores * number of samples.
ncores:
#Memory for the R session in MB
memory:
##---------------------------------------------------------------------------------------------

####################################################################################################
########################################### INPUT FASTQS ###########################################
####################################################################################################

## Path to a folder containing gzipped fastq files. Note that the workflow makes
## some assumptions about the format of the names of the FASTQ files, please consult
## the documentation to make sure that your files are properly named.
##---------------------------------------------------------------------------------------------
fastq_dir:
##------------------------------------------

## Fastq Quality Control
##---------------------------------------------------------------------------------------------

## Should the FASTQ files be trimmed with fastp before quantification, logical
trimming: False
trimmed_fastq_dir: NA
extra_args_fastp: ""


## number of cells expected per sample for "--expectCells" flag
nCells:

## which samples should be run under the --expectCells flag
s:

extra_args_fastqc: ""

extra_args_multiqc: ""

## Renaming of Gene names, Ensemble to symbol names
##---------------------------------------------------------------------------------------------
## Type of Bioconductor genome annotation package; for human: "org.Hs.eg.db", mouse: "org.Mm.eg.db" , zebrafish: "org.Dr.eg.db"
OrgDb: "org.Hs.eg.db"
## choose which mart ensemble database to query either Homo_sapiens:"hsapiens_gene_ensembl" or Mus_musculus: "mmusculus_gene_ensembl"
ensemble_database: "hsapiens_gene_ensembl"
## Choose the original gene names format: ensemble 'ensemble_gene_id' or already symbolnames:'hgnc_symbol' for human
gene_format: 'ensemble_gene_id'

## Filtering, normalization of cells and HVG detection by Seurat, set parameter to NULL for no filtering
##---------------------------------------------------------------------------------------------
## Cell Filtering
## Filter for importing as Seurat object, set to non-zero for lower runtime
## Keep all genes expressed in >= 'min.cells' cel
min.cells: 3
## Keep all cells with at least `min.genes` detected genes
min.genes: 200
## For which features to filter, currently "nGenes" or "percent.mito" or NA
filter.vars:
## pattern for mitochondrial, using regex. Normally either "^MT-" or "^mt-"
regex.mito:
## Cell filter thresholds for unique gene counts and percentage of mitochondrial genes
## ngenes, use inf , -inf for no threshold. The definitive parameters of the number of genes have to be determined by removing the tail of the lognormal of the number of genes distribution shown in the QC report
low.ngenes:
high.ngenes:
## percentage mitochondrial genes. Default values for PBMCs is 0 to 15 %, has to be inspected in the QC report.
low.percent.mito:
high.percent.mito:
## Remove predicted doublets (logical), if TRUE doublets are removed from the data
remove_doublets: TRUE

